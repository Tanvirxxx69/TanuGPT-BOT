const moment = require("moment-timezone");

module.exports = {
  config: {
    name: "ramadan",
    aliases: ["romjan", "ramzan", "roja"],
    version: "1.0",
    author: "Tanvir",
    shortDescription: "рж░ржоржЬрж╛ржи ржорж╛рж╕ ржкрж░рзНржпржирзНржд ржХржд ржжрж┐ржи ржмрж╛ржХрж┐ ржЬрж╛ржирж╛ржУ",
    longDescription: "ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ рж╕ржорзЯ ржЕржирзБржпрж╛рзЯрзА рж░ржоржЬрж╛ржи ржорж╛рж╕ рж╢рзБрж░рзБ рж╣рждрзЗ ржЖрж░ ржХржд ржжрж┐ржи ржмрж╛ржХрж┐ рждрж╛ ржЬрж╛ржирж╛рзЯ",
    category: "islamic",
    guide: {
      bn: "{p}ramadan тАФ рж░ржоржЬрж╛ржи ржкрж░рзНржпржирзНржд рж╕ржорзЯ ржЬрж╛ржирзЛ"
    }
  },

  onStart: async function ({ api, event }) {
    try {
      const today = moment().tz("Asia/Dhaka");

      // ЁЯМЩ 2025 рж╕рж╛рж▓рзЗрж░ рж░ржоржЬрж╛ржирзЗрж░ рж╕ржорзНржнрж╛ржмрзНржп рж╢рзБрж░рзБ рждрж╛рж░рж┐ржЦ (ржлрзЗржмрзНрж░рзБрзЯрж╛рж░рж┐рж░ рж╢рзЗрж╖рзЗрж░ ржжрж┐ржХрзЗ)
      const ramadanStart = moment.tz("2025-02-28", "Asia/Dhaka");

      const diffDays = ramadanStart.diff(today, "days");

      let message = "";

      if (diffDays > 0) {
        message = `ЁЯМЩ ржЖрж▓рж╣рж╛ржоржжрзБрж▓рж┐рж▓рзНрж▓рж╛рж╣!  
ржкржмрж┐рждрзНрж░ рж░ржоржЬрж╛ржи ржорж╛рж╕ рж╢рзБрж░рзБ рж╣рждрзЗ ржмрж╛ржХрж┐ ржЖржЫрзЗ ${diffDays} ржжрж┐ржи ЁЯХМ  
ЁЯд▓ ржЗржирж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рзЯрж╛ржо ржУ ржЗржмрж╛ржжржд ржХржмрзБрж▓ ржХрж░ржмрзЗржи ржЖрж▓рзНрж▓рж╛рж╣ред`;
      } else if (diffDays === 0) {
        message = `ЁЯМЩ ржЖржЬ ржерзЗржХрзЗ рж╢рзБрж░рзБ рж╣рж▓рзЛ ржкржмрж┐рждрзНрж░ рж░ржоржЬрж╛ржи ржорж╛рж╕!  
ЁЯХМ рж░ржоржЬрж╛ржи ржорзЛржмрж╛рж░ржХ ржнрж╛ржЗ ЁЯТл  
ЁЯд▓ ржЖрж▓рзНрж▓рж╛рж╣ ржЖржорж╛ржжрзЗрж░ рж░рзЛржЬрж╛ ржУ ржжрзЛрзЯрж╛ ржХржмрзБрж▓ ржХрж░рзБржиред`;
      } else {
        message = `ЁЯМЩ рж░ржоржЬрж╛ржи ржорж╛рж╕ ржПржЗ ржмржЫрж░ рж╢рзЗрж╖ рж╣рзЯрзЗ ржЧрзЗржЫрзЗ ЁЯТл  
ржЗржирж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣ ржкрж░рзЗрж░ ржмржЫрж░ ржЖржмрж╛рж░ ржжрзЗржЦрж╛ рж╣ржмрзЗ рж░ржоржЬрж╛ржирзЗ ЁЯХМ`;
      }

      api.sendMessage(message, event.threadID, event.messageID);
    } catch (error) {
      console.error(error);
      api.sendMessage(
        "ржжрзБржГржЦрж┐ржд ржнрж╛ржЗ ЁЯШв ржХрж┐ржЫрзБ рж╕ржорж╕рзНржпрж╛ рж╣рзЯрзЗржЫрзЗ, ржПржХржЯрзБ ржкрж░ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред",
        event.threadID,
        event.messageID
      );
    }
  }
};
