const moment = require("moment-timezone");

module.exports = {
  config: {
    name: "eid",
    aliases: ["eidulfitr", "eidcount"],
    version: "1.0",
    author: "Tanvir",
    shortDescription: "ржЬрж╛ржирж╛ржУ ржИржжрзБрж▓ ржлрж┐рждрж░ ржкрж░рзНржпржирзНржд ржЖрж░ ржХржд ржжрж┐ржи ржмрж╛ржХрж┐",
    longDescription: "ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ рж╕ржорзЯ ржЕржирзБржпрж╛рзЯрзА ржИржжрзБрж▓ ржлрж┐рждрж░ ржкрж░рзНржпржирзНржд ржХржд ржжрж┐ржи ржмрж╛ржХрж┐ рждрж╛ ржЬрж╛ржирж╛ржмрзЗ",
    category: "islamic",
    guide: {
      bn: "{p}eid тАФ ржИржжрзБрж▓ ржлрж┐рждрж░ ржкрж░рзНржпржирзНржд рж╕ржорзЯ ржЬрж╛ржирзЛ"
    }
  },

  onStart: async function ({ api, event }) {
    try {
      const today = moment().tz("Asia/Dhaka");

      // ржкрзНрж░рждрж┐ ржмржЫрж░ ржИржжрзБрж▓ ржлрж┐рждрж░рзЗрж░ ржЖржирзБржорж╛ржирж┐ржХ рждрж╛рж░рж┐ржЦ (ржкрж░ржмрж░рзНрждрзА рж░ржоржЬрж╛ржи рж╢рзЗрж╖рзЗ)
      // ржПржЦрж╛ржирзЗ рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржкрзНрж░рждрж┐ ржмржЫрж░ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ
      const eidDate = moment.tz("2025-03-30", "Asia/Dhaka"); 

      const diffDays = eidDate.diff(today, "days");

      let message = "";

      if (diffDays > 0) {
        message = `ЁЯМЩ ржЖрж▓рж╣рж╛ржоржжрзБрж▓рж┐рж▓рзНрж▓рж╛рж╣!  
ржИржжрзБрж▓ ржлрж┐рждрж░ ржкрж░рзНржпржирзНржд ржмрж╛ржХрж┐ ржЖржЫрзЗ ${diffDays} ржжрж┐ржи ЁЯТл  
ЁЯХЛ ржЗржирж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣ ржПржЗ ржИржжрзЗ ржЖрж▓рзНрж▓рж╛рж╣ ржпрзЗржи ржЖржорж╛ржжрзЗрж░ рж╕ржмрж╛ржЗржХрзЗ ржХрзНрж╖ржорж╛ ржХрж░рзЗржи ЁЯд▓`;
      } else if (diffDays === 0) {
        message = `ЁЯОЙ ржЖржЬ ржИржжрзБрж▓ ржлрж┐рждрж░! ЁЯМЩ  
ЁЯТЦ рж╕ржмрж╛ржЗржХрзЗ ржИржж ржорзЛржмрж╛рж░ржХ!  
ЁЯХМ ржЖрж▓рзНрж▓рж╛рж╣ ржЖржорж╛ржжрзЗрж░ рж░рзЛржЬрж╛ ржУ ржЗржмрж╛ржжржд ржХржмрзБрж▓ ржХрж░рзБржи ЁЯд▓`;
      } else {
        message = `ЁЯМЩ ржИржжрзБрж▓ ржлрж┐рждрж░ ржЗрждрж┐ржоржзрзНржпрзЗржЗ ржЪрж▓рзЗ ржЧрзЗржЫрзЗ ржПржЗ ржмржЫрж░ ЁЯТл  
ржЗржирж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣ ржЖржмрж╛рж░ ржжрзЗржЦрж╛ рж╣ржмрзЗ ржкрж░рзЗрж░ ржИржжрзЗ ЁЯХМ`;
      }

      api.sendMessage(message, event.threadID, event.messageID);
    } catch (error) {
      console.error(error);
      api.sendMessage("ржжрзБржГржЦрж┐ржд ржнрж╛ржЗ ЁЯШв ржХрж┐ржЫрзБ рж╕ржорж╕рзНржпрж╛ рж╣рзЯрзЗржЫрзЗ, ржПржХржЯрзБ ржкрж░рзЗ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред", event.threadID, event.messageID);
    }
  }
};
